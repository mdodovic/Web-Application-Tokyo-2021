<mat-menu>
</mat-menu>

<div class="container-fluid">

    <div class="row enterResultsMenu">
        <div class="col-sm-6">
            <button mat-menu-item (click)="finishResultsEntering()" class="matMenuFont">Vrati se nazad</button>
        </div>
        <div class="col-sm-6" *ngIf="confirmedResultsFinal">
            <button mat-menu-item (click)="closeCompetitionFinal()" class="matMenuFont">Kraj takmičenja</button>
        </div>
    </div>
</div>
<br>
<div class="enterResultsMenu">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Sport i disciplina</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="centerContent">
                    <select name="choosenCompetition" [(ngModel)]="choosenCompetition"
                        (ngModelChange)="competitionIsChoosen()">
                        <option *ngFor='let c of competitions' [ngValue]="c">[{{genders[c.gender]}}] {{c.sportName}}
                            {{c.disciplineName}}

                        </option>
                    </select>
                </td>

            </tr>

            <tr>
                <td> <span *ngIf=' errorNoCompetition' class="errorClass">{{ errorNoCompetition}}</span></td>
            </tr>

        </tbody>
    </table>

</div>
<br>
<div *ngIf="choosenCompetition" class="enterResultsMenu">

    <div class="table-responsive" *ngIf="choosenCompetition.actAsSingle && !choosenCompetition.rankPlayers">
        Mesto održavanja:&nbsp;<strong>{{competitionLocationIndividual}}</strong>
        <br>
        <br>
        Datum održavanja:&nbsp;<strong>{{competitionDateIndividual}}</strong>
        <br>
        <br>
        Vreme održavanja:&nbsp;<strong>{{competitionTimeIndividual}}</strong>
        <br>
        <br>
        <div *ngIf="choosenCompetition.comment">
            {{choosenCompetition.comment}}
        </div>
        <table class="table centerContent">
            <thead>
                <tr>
                    <th scope="col">
                        Država
                    </th>
                    <th scope="col">
                        Takmičari
                    </th>
                    <th>
                        Rezultat
                    </th>
                </tr>

            </thead>
            <tbody>
                <tr *ngFor="let p of representativesFinal">
                    <td>{{p.nationality}}</td>
                    <td>{{p.player}}</td>
                    <td>
                        <input type="text" placeholder="{{choosenCompetition.resultFormat}}" name="IndividualResult"
                            [(ngModel)]="p.score" [readonly]="confirmedResultsFinal || needForRepetition">

                    </td>
                    <td *ngIf="errorNoResults && !p.score">
                        <span class="errorClass">Unesite rezultat!</span>
                    </td>
                </tr>
            </tbody>
        </table>
        <br>
        <button mat-menu-item class="matMenuFont centerContent" (click)='confirmResultsFinal()'>
            Evidentiraj rezultate
        </button>
        <div *ngIf="needForRepetition">
            <table class="table centerContent">
                <tbody>
                    <tr *ngFor="let r of repeatFinalRound">
                        <td>
                            {{r.position + 1}}. mesto
                        </td>
                        <td>
                            <table class="table centerContent">
                                <thead>
                                    <tr>
                                        <th scope="col">
                                            Država
                                        </th>
                                        <th scope="col">
                                            Takmičari
                                        </th>
                                        <th>
                                            Rezultat
                                        </th>
                                    </tr>

                                </thead>
                                <tbody>
                                    <tr *ngFor="let rp of r.competitors">
                                        <td>{{rp.nationality}}</td>
                                        <td>{{rp.player}}</td>
                                        <td>
                                            <input type="text" placeholder="{{choosenCompetition.resultFormat}}"
                                                name="IndividualResult" [(ngModel)]="rp.score"
                                                [readonly]="confirmedResultsFinal">

                                        </td>
                                        <td *ngIf="errorNoResults && !rp.score">
                                            <span class="errorClass">Unesite rezultat!</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                </tbody>
            </table>
            <br>
            <button mat-menu-item class="matMenuFont centerContent" (click)='confirmRepeatedResultsFinal()'>
                Evidentiraj ponovljene rezultate
            </button>
        </div>
    </div>
    <div class="table-responsive" *ngIf="choosenCompetition.actAsSingle && choosenCompetition.rankPlayers">
        <table class="table" *ngIf="showEighthFinalTree">
            <thead>
                <tr>
                    <th scope="col">
                        Kolo
                    </th>
                    <th scope="col" colspan="8">
                        Takmičenje
                    </th>

                </tr>

            </thead>
            <tbody>
                <tr *ngIf="showEighthFinalTree">
                    <th scope="row">1/8 finala</th>
                    <td *ngFor="let i of eighthFinalTreeArray" colspan="1" class="centerContent">
                        <div class="table-responsive enterResultsMenu">
                            <table class="table">
                                <tbody>
                                    <tr>
                                        <td>
                                            Mesto:&nbsp;<strong>{{competitionLocationTree[i]}}</strong>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Datum:&nbsp;<strong>{{competitionDateTree[i]}}</strong>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Vreme:&nbsp;<strong>{{competitionTimeTree[i]}}</strong>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            [{{competitors[i].nationality1}}] {{competitors[i].player1}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            [{{competitors[i].nationality2}}] {{competitors[i].player2}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" placeholder="{{choosenCompetition.resultFormat}}"
                                                name="TreeResultEighth" [(ngModel)]="competitors[i].score"
                                                [readonly]="showQuarterFinalTree || showSemiFinalTree">

                                        </td>
                                    </tr>
                                    <tr>
                                        <td *ngIf="errorNoResults && !competitors[i].score">
                                            <span class="errorClass">Unesite rezultat!</span>
                                        </td>
                                    </tr>

                                </tbody>
                            </table>
                        </div>
                    </td>
                </tr>
                <br>

                <tr *ngIf="showQuarterFinalTree">
                    <th scope="row">1/4 finala</th>
                    <td *ngFor="let i of quarterFinalTreeArray" colspan="2" class="centerContent">
                        <div class="table-responsive enterResultsMenu">
                            <table class="table">
                                <tbody>
                                    <tr>
                                        <td>
                                            Mesto:&nbsp;<strong>{{competitionLocationTree[i]}}</strong>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Datum:&nbsp;<strong>{{competitionDateTree[i]}}</strong>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Vreme:&nbsp;<strong>{{competitionTimeTree[i]}}</strong>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            [{{competitors[i].nationality1}}] {{competitors[i].player1}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            [{{competitors[i].nationality2}}] {{competitors[i].player2}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="text" placeholder="{{choosenCompetition.resultFormat}}"
                                                name="TreeResultQuarter" [(ngModel)]="competitors[i].score"
                                                [readonly]="showSemiFinalTree">

                                        </td>
                                    </tr>
                                    <tr>
                                        <td *ngIf="errorNoResults && !competitors[i].score">
                                            <span class="errorClass">Unesite rezultat!</span>
                                        </td>
                                    </tr>

                                </tbody>
                            </table>
                        </div>
                    </td>
                </tr>

                <br>
            </tbody>
        </table>
        <button *ngIf="showEighthFinalTree && !showQuarterFinalTree && !showSemiFinalTree" mat-menu-item
            class="matMenuFont centerContent" (click)='confirmEighthFinal()'>
            Evidentiraj rezultate 1/8 finala
        </button>

        <button *ngIf="showQuarterFinalTree && !showSemiFinalTree" mat-menu-item class="matMenuFont centerContent"
            (click)='confirmQuarterFinal()'>
            Evidentiraj rezultate 1/4 finala
        </button>

        <button *ngIf="showSemiFinalTree" mat-menu-item class="matMenuFont centerContent" (click)='confirmSemiFinal()'>
            Evidentiraj rezultate 1/2 finala
        </button>
        <!--Ovo div se pomera dole-->
    </div>
    <!---->

    <!--

                <tr *ngIf="showSemiFinalTree">
                    <th scope="row">1/2 finala</th>
                    <td *ngFor="let i of semiFinalTreeArray" colspan="4" class="centerContent">
                        <div class="table-responsive enterTimetableMenu">
                            <table class="table">
                                <tbody>
                                    <tr>
                                        <td>
                                            <select name="choosenLocationTree[i]" [(ngModel)]="choosenLocationTree[i]">
                                                <option *ngFor='let l of locations' [ngValue]="l">
                                                    {{l}}
                                                </option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="datetime-local" name="choosenDatetimeTree[i]"
                                                [(ngModel)]="choosenDatetimeTree[i]" value=""
                                                min="{{minDatetimeValueIndividual}}"
                                                max="{{maxDatetimeValueIndividual}}">
                                        </td>
                                    </tr>
                                    <tr *ngIf="!showQuarterFinalTree">
                                        <td>
                                            {{indexesTree[i]}}.
                                            [{{competitors[indexesTree[i] - 1].nationality}}]
                                            {{competitors[indexesTree[i] - 1].representation}}
                                        </td>
                                    </tr>
                                    <tr *ngIf="!showQuarterFinalTree">
                                        <td>
                                            {{indexesTree[i] + 2}}.
                                            [{{competitors[indexesTree[i] - 1 + 2].nationality}}]
                                            {{competitors[indexesTree[i] - 1 + 2].representation}}
                                        </td>
                                    </tr>
                                    <tr *ngIf="showQuarterFinalTree">
                                        <td>
                                            Nisu poznati učesnici
                                        </td>
                                    </tr>
                                    <tr *ngIf='!errorClashingCompetitionsTree[i]'>
                                        <td>
                                            <span *ngIf='errorNoChoosenLocationTree[i]'
                                                class="errorClass">{{errorNoChoosenLocationTree[i]}}</span>
                                        </td>
                                    </tr>
                                    <tr *ngIf='!errorClashingCompetitionsTree[i]'>
                                        <td>
                                            <span *ngIf='errorNoChoosenDatetimeCompetitionTree[i]'
                                                class="errorClass">{{errorNoChoosenDatetimeCompetitionTree[i]}}</span>
                                        </td>
                                    </tr>
                                    <tr *ngIf='errorClashingCompetitionsTree[i]'>
                                        <td colspan="2">
                                            <span class="errorClass">{{errorClashingCompetitionsTree[i]}}</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                    </td>

                </tr>
                <tr>
                    <th scope="row">Meč za <br> 3. mesto</th>
                    <td *ngFor="let i of thirdPlaceTreeArray" colspan="8" class="centerContent">
                        <div class="table-responsive enterTimetableMenu">
                            <table class="table">
                                <tbody>
                                    <tr>
                                        <td>
                                            <select name="choosenLocationTree[i]" [(ngModel)]="choosenLocationTree[i]">
                                                <option *ngFor='let l of locations' [ngValue]="l">
                                                    {{l}}
                                                </option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="datetime-local" name="choosenDatetimeTree[i]"
                                                [(ngModel)]="choosenDatetimeTree[i]" value=""
                                                min="{{minDatetimeValueIndividual}}"
                                                max="{{maxDatetimeValueIndividual}}">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Nisu poznati učesnici
                                        </td>
                                    </tr>
                                    <tr *ngIf='!errorClashingCompetitionsTree[i]'>
                                        <td>
                                            <span *ngIf='errorNoChoosenLocationTree[i]'
                                                class="errorClass">{{errorNoChoosenLocationTree[i]}}</span>
                                        </td>
                                    </tr>
                                    <tr *ngIf='!errorClashingCompetitionsTree[i]'>
                                        <td>
                                            <span *ngIf='errorNoChoosenDatetimeCompetitionTree[i]'
                                                class="errorClass">{{errorNoChoosenDatetimeCompetitionTree[i]}}</span>
                                        </td>
                                    </tr>
                                    <tr *ngIf='errorClashingCompetitionsTree[i]'>
                                        <td colspan="2">
                                            <span class="errorClass">{{errorClashingCompetitionsTree[i]}}</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </td>
                </tr>
                <tr>
                    <th scope="row">Finale</th>
                    <td *ngFor="let i of firstPlaceTreeArray" colspan="8" class="centerContent">
                        <div class="table-responsive enterTimetableMenu">
                            <table class="table">
                                <tbody>
                                    <tr>
                                        <td>
                                            <select name="choosenLocationTree[i]" [(ngModel)]="choosenLocationTree[i]">
                                                <option *ngFor='let l of locations' [ngValue]="l">
                                                    {{l}}
                                                </option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <input type="datetime-local" name="choosenDatetimeTree[i]"
                                                [(ngModel)]="choosenDatetimeTree[i]" value=""
                                                min="{{minDatetimeValueIndividual}}"
                                                max="{{maxDatetimeValueIndividual}}">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            Nisu poznati učesnici
                                        </td>
                                    </tr>
                                    <tr *ngIf='!errorClashingCompetitionsTree[i]'>
                                        <td>
                                            <span *ngIf='errorNoChoosenLocationTree[i]'
                                                class="errorClass">{{errorNoChoosenLocationTree[i]}}</span>
                                        </td>
                                    </tr>
                                    <tr *ngIf='!errorClashingCompetitionsTree[i]'>
                                        <td>
                                            <span *ngIf='errorNoChoosenDatetimeCompetitionTree[i]'
                                                class="errorClass">{{errorNoChoosenDatetimeCompetitionTree[i]}}</span>
                                        </td>
                                    </tr>
                                    <tr *ngIf='errorClashingCompetitionsTree[i]'>
                                        <td colspan="2">
                                            <span class="errorClass">{{errorClashingCompetitionsTree[i]}}</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                    </td>
                </tr>
            </tbody>
        </table>
    </div>
-->
</div>
<br>
<div *ngIf="competitionResultsMedalsFinished" class="enterResultsMenu successClass">
    Takmičenje je završeno!
</div>

<!--


    <div class="table-responsive" *ngIf="choosenCompetition.actAsSingle && !choosenCompetition.rankPlayers">
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">
                        Lokacija
                    </th>
                    <th scope="col">
                        Datum i vreme
                    </th>

                </tr>

            </thead>
            <tbody>
                <tr>
                    <td class="centerContent">
                        <select name="choosenLocationIndividual" [(ngModel)]="choosenLocationIndividual">
                            <option *ngFor='let l of locations' [ngValue]="l">{{l}}
                            </option>
                        </select>
                    </td>

                    <td class="centerContent">
                        <input type="datetime-local" name="choosenDatetimeIndividual"
                            [(ngModel)]="choosenDatetimeIndividual" value="" min="{{minDatetimeValueIndividual}}"
                            max="{{maxDatetimeValueIndividual}}">
                    </td>

                </tr>

                <tr *ngIf='!errorClashingCompetitionsIndividual'>
                    <td class="centerContent">
                        <span *ngIf='errorNoChoosenLocationIndividual'
                            class="errorClass">{{errorNoChoosenLocationIndividual}}</span>
                    </td>
                    <td class="centerContent">
                        <span *ngIf='errorNoChoosenDatetimeCompetitionIndividual'
                            class="errorClass">{{errorNoChoosenDatetimeCompetitionIndividual}}</span>
                    </td>
                </tr>
                <tr *ngIf='errorClashingCompetitionsIndividual'>
                    <td colspan="2">
                        <span class="errorClass">{{errorClashingCompetitionsIndividual}}</span>
                    </td>
                </tr>

            </tbody>
        </table>
    </div>






-->